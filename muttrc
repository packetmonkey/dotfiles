set folder           = ~/Mail/               # mailbox location
set alias_file       = ~/.mutt/alias         # where to store aliases
set header_cache     = ~/.mutt/cache/headers # where to store headers
set message_cachedir = ~/.mutt/cache/bodies  # where to store bodies
set certificate_file = ~/.mutt/certificates  # where to store certs
set mailcap_path     = ~/.mutt/mailcap       # entries for filetypes
set tmpdir           = ~/.mutt/temp          # where to keep temp files
set signature        = ~/.mutt/sig           # my signature file

# Status Bar -----------------------------------------
set status_chars  = " *%A"
set status_format = "───[ Folder: %f ]───[%r%m messages%?n? (%n new)?%?d? (%d to delete)?%?t? (%t tagged)? ]───%>─%?p?( %p postponed )?───"

# Header Options -------------------------------------
ignore *                                # ignore all headers
unignore from: to: cc: date: subject:   # show only these
unhdr_order *                           # some distros order things by default
hdr_order from: to: cc: date: subject:  # and in this order

set spoolfile = "+PacketMonkey/INBOX"
set mbox      = "+PacketMonkey/Archive"
set postponed = "+PacketMonkey/Drafts"

set date_format = "%m/%d"
set index_format = "[%Z] (%02E) %-20.20F  %s"
set sort = threads
set sort_aux = reverse-last-date-received
set uncollapse_jump

set realname = "Evan Sharp"          # who am i?
set from = "evan@packetmonkey.org"
set envelope_from                    # which from?
set sig_dashes                       # dashes before sig
set edit_headers                     # show headers when composing
set fast_reply                       # skip to compose when replying
set askcc                            # ask for CC:
set fcc_attach                       # save attachments with the body
unset mime_forward                   # forward attachments as part of body
set forward_format = "Fwd: %s"       # format of subject when forwarding
set attribution = "On %d, %n wrote:" # format of quoting header
set reply_to                         # reply to Reply to: field
set reverse_name                     # reply as whomever it was to
set include                          # include message in replies
set forward_quote                    # include message in forwards
set editor = "nvim"                  # Use terminal Vim to compose email.
set sendmail = "/usr/local/bin/msmtp -a fastmail"
set sendmail_wait = 0
set record="+PacketMonkey/INBOX.Sent Messages"

set query_command = "contacts -Sf '%eTOKEN%n' '%s' | sed -e 's/TOKEN/\t/g'"
bind editor <Tab> complete-query
bind editor ^T    complete


# Strip HTML tags from HTML emails
auto_view text/html 
alternative_order text/plain text/enriched text/html  

# Don't update read counts very frequently when loading large mailboxes
set read_inc = 1000

# Sync email
macro index O "<shell-escape>offlineimap<enter>"
macro index o "<shell-escape>offlineimap -qf INBOX<enter>" "run offlineimap to sync inbox"

macro index M "<save-message>?<toggle-mailboxes>" "move a message to a mailbox"

# Only move read emails when they're actually looked at, not simply because we
# saw them in the list
set mark_old = no

# Hitting C-b while viewing a message opens links
macro index,pager \cb <pipe-entry>'urlview'<enter> 'Follow links with urlview'

macro index,pager A  "<save-message>=PacketMonkey/INBOX.Archive<enter>"  "mark message as Archived"
macro index,pager S  "<save-message><kill-line>=PacketMonkey/INBOX.Junk<quote-char> Mail<enter>"  "mark message as Spam"

macro pager H <view-attachments>/html<enter><view-mailcap><exit>

color normal default default
color error brightred white
color indicator brightwhite blue
color status brightblue default
color search brightred default

color index brightblack default ~D
color index brightgreen default ~U
color index brightyellow red ~T
color index brightyellow default ~F

color index default default "~v~(!~N)~(!~F)" # collapsed thread with no New or Flagged
color index red     default "~v~(~F)~(!~N)"  # collapsed thread with Flagged but no New
color index green   default "~v~(~N)"        # collapsed thread with New

color hdrdefault cyan default
color header white default ^From:
color header brightdefault default ^Soubject:
folder-hook . "push <collapse-all>\n"
